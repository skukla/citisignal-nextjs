# Unified category page query - demonstrates Adobe API Mesh value
# Single query to orchestrate multiple backend services
query GetCategoryPageData(
  $category: String
  $phrase: String
  $filter: Citisignal_PageFilter
  $sort: Citisignal_SortInput
  $pageSize: Int
  $currentPage: Int
) {
  Citisignal_categoryPageData(
    category: $category
    phrase: $phrase
    filter: $filter
    sort: $sort
    pageSize: $pageSize
    currentPage: $currentPage
  ) {
    navigation {
      headerNav {
        href
        label
        category
      }
      footerNav {
        href
        label
      }
    }
    products {
      items {
        id
        sku
        name
        urlKey
        price
        originalPrice
        discountPercent
        inStock
        image {
          url
          altText
        }
        memory
        colors {
          name
          hex
        }
        manufacturer
      }
      page_info {
        current_page
        page_size
        total_pages
      }
      aggregations {
        title
        key
        type
        options {
          id
          name
          count
        }
      }
    }
    facets {
      facets {
        title
        key
        type
        options {
          id
          name
          count
        }
      }
    }
    breadcrumbs {
      items {
        name
        urlPath
      }
    }
  }
}