# Query for popular phone cards
# Uses mesh-enhanced fields for efficient card display

query GetPopularPhonesForCards($limit: Int = 4) {
  products(
    filter: [{ attribute: "categories", eq: "phones" }]
    limit: $limit
    page: 1
  ) {
    items {
      product {
        __typename
        id
        name
        sku
        urlKey
        shortDescription
        
        images {
          url
          label
          roles
        }
        
        ... on Catalog_ComplexProductView {
          manufacturer
          memory_options
          available_colors {
            name
            hex
          }
          is_on_sale
          display_price
          in_stock
          
          priceRange {
            minimum {
              regular {
                amount {
                  value
                  currency
                }
              }
              final {
                amount {
                  value
                  currency
                }
              }
            }
          }
        }
        
        ... on Catalog_SimpleProductView {
          manufacturer
          is_on_sale
          display_price
          in_stock
          
          price {
            regular {
              amount {
                value
                currency
              }
            }
            final {
              amount {
                value
                currency
              }
            }
          }
        }
      }
    }
  }
}