# Query for product cards using our custom mesh query
# Returns canonically formatted data ready for display
# Includes configurable_options for smart button logic
# Colors are provided as visual indicators only (non-interactive)
# For variant selection, use GetProductDetail query on individual product pages

query GetProductCards(
  $phrase: String
  $filter: Citisignal_ProductFilter
  $sort: Citisignal_SortInput
  $limit: Int = 20
  $page: Int = 1
) {
  Citisignal_productCards(
    phrase: $phrase
    filter: $filter
    sort: $sort
    limit: $limit
    page: $page
  ) {
    items {
      id
      sku
      urlKey
      name
      manufacturer
      price # Display string: "$1,199.99"
      priceValue # Raw number: 1199.99
      originalPrice # Display string: "$1,399.99"
      originalPriceValue # Raw number: 1399.99
      discountPercent
      inStock
      # Semantic image fields (abstracted from Adobe Commerce roles)
      image {
        url
        altText
      }
      thumbnail {
        url
        altText
      }
      gallery {
        url
        altText
      }
      memory
      # Color data for visual indicators (non-interactive)
      colors {
        name
        hex
      }
      # Configurable options for smart button logic
      configurable_options {
        label
        attribute_code
        values {
          label
          value
          swatch_data {
            type
            value
          }
        }
      }
    }
    totalCount
    hasMoreItems
    currentPage
  }
}
