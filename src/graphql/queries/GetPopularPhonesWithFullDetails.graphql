# Full Detail Query for Popular Phones - Complete data for featured products
# Includes all fields for when you need complete product information
# For product cards, use GetPopularPhonesForCards.graphql instead

query GetPopularPhonesWithFullDetails($limit: Int = 4) {
  products(
    filter: [{ attribute: "categories", eq: "phones" }]
    limit: $limit
    page: 1
  ) {
    total
    items {
      product {
        __typename
        id
        name
        sku
        urlKey
        images {
          url
          label
          roles
        }
        ... on Catalog_ComplexProductView {
          # Enhanced fields from mesh
          manufacturer
          memory_options
          available_colors {
            name
            hex
          }
          is_on_sale
          
          # Original price structure (always available)
          priceRange {
            minimum {
              regular {
                amount {
                  value
                  currency
                }
              }
              final {
                amount {
                  value
                  currency
                }
              }
            }
          }
          # Options for configurations
          options {
            title
            values {
              ... on Catalog_ProductViewOptionValueSwatch {
                id
                title
                value
              }
            }
          }
          
          # Attributes and categories
          attributes {
            name
            value
          }
          categories
        }
        ... on Catalog_SimpleProductView {
          # Same enhancements apply
          manufacturer
          is_on_sale
          # Simple product price structure
          price {
            regular {
              amount {
                value
                currency
              }
            }
            final {
              amount {
                value
                currency
              }
            }
          }
          attributes {
            name
            value
          }
        }
      }
    }
  }
}